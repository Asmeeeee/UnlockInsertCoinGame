# ============= LIEUX =============

---
id: regles-000
type: Location
events:
  info:
    actor: "</p> <img src=\"https://cdn.discordapp.com/attachments/498184586736435202/834693589681831977/Image_InsertCoin.JPG\"> <p>REGLES DU JEUX  ... Tapez 'Start' pour commencer"
  look:
    actor: |
      Rien a voir de plus ici
---
id: intro-000
type: Location
events:
  info:
    actor: "Un long dimanche d'automne. Votre telephone est a court de batterie. Plus qu'une solution pour tuer l'ennui: direction le grenier de la maison ou sommeille la vieille borne d'arcade poussiereuse de votre grand-pere ! "
  look:
    actor: |
      Rien a voir de plus ici
---
id: grenier-000
type: Location
contains:
  - lampe-000
events:
  info:
    actor: "Grenier"
  look:
    actor: |
      Vous etes dans le grenier de la maison. A l'est, vous apercevez la borne d'arcade. Au fond a l'ouest, il fais trop sombre et vous n'y voyez rien. Accroche sur le mur, vous remarquez le vieux casque a lampe frontale de votre tonton Stephane.
---
id: coin-000
type: Location
props:
  - dark
contains:
  - piece-000
events:
  info:
    actor: "Ouest du grenier"
  look:
    actor: |
      Vous êtes au bout du grenier, vous entendez la pluie qui frappe la toiture.
      Grace a votre lampe frontale vous apercevez une piece doree au sol.
---
id: borne-verrouille-000
type: Location
contains:
  - borne-verrouille-001
events:
  info:
    actor: "Est du grenier"
  look:
    actor: |
      Vous etes a l'est du grenier. C'est la partie la plus eclairee de ce dernier.'
---
id: borne-deverrouille-000
type: Location
contains:
  - borne-deverrouille-001
events:
  info:
    actor: "Est du grenier"
  look:
    actor: |
      Vous etes a l'est du grenier. C'est la partie la plus eclairee de ce dernier.'


# ============= OBJETS =============

---
id: lampe-000
type: Thing
props:
  - lightable
  - takable
names   :
  - lampe
  - casque
  - lampe-frontale
gender: fem
events:
  info:
    actor:
      - props: =lampe-000:light-on
        data : "Une lampe frontale allumee"
      - data : "Un lampe frontale eteinte"
  look:
    actor:
      - props: object:light-on
        data : "Le vieux casque a lampe frontale de votre tonton Stephane. La lampe est allumee
              </p> <img src=\"https://cdn.discordapp.com/attachments/498184586736435202/834433662766415922/Image_LampeFrontale.JPG\"> <p>"
      - data : "Le vieux casque a lampe frontale de votre tonton Stephane. La lampe est eteinte
              </p> <img src=\"https://cdn.discordapp.com/attachments/498184586736435202/834433662766415922/Image_LampeFrontale.JPG\"> <p>"
  light-on:
    - props : object:light-on
      actor : "La lampe est déjà allumée."
    - actor : "Vous allumez votre lampe frontale."
      effects:
        - type  : ChangePropEffect
          modifs: object:light-on
  light-off:
    - props : -object:light-on
      actor : "La lampe est déjà éteinte."
    - actor : "Vous éteignez votre lampe frontale."
      effects:
        - type  : ChangePropEffect
          modifs: -object:light-on
---
id: piece-000
type: Thing
props:
  - takable
  - key-for-borne-verrouille-borne-000
name:
    - piece
gender: fem
events:
  info:
    actor: "Une piece"
  look:
    actor: |
      Une piece.
---
id: borne-verrouille-001
type: Thing
name:
    - arcade
gender: fem
events:
  info:
    actor: "Une borne d'arcade"
  look:
    actor: |
      L'ecran est allumé, il affiche clairement <i>Appuyez sur PLAY pour commencer !</i>
---
id: borne-deverrouille-001
type: Thing
names:
  - arcade
gender: fem
props:
  - light-on
events:
  info:
    #</p> <img source=\
    actor: "Une borne d'arcade"
  look:
    actor: |
      Vous constatez les performances impressionnantes des precedents joueurs, affiche sur l'ecran.
  type:
    - props: event:typed-5938
      effects:
        - type  : EnterPortalEffect
          exit  : =portal-borne-jungle-000-exit-1
    - actor: |
        Ce n'est pas le bon code.

# ============= PORTAILS =============

---
id: portal-regles-intro-000
type: Portal
exits:
  - id: regles-000-start
    location: regles-000
    direction: start
    events:
      enter-portal:
        actor   : "INSERT COIN"
  - id: intro-000-sens_interdit
    location: intro-000
    direction: sens_interdit
    events:
      enter-portal:
        actor   : "XXX"
---
id: portal-intro-grenier-000
type: Portal
exits:
  - id: intro-000-suivant
    location: intro-000
    direction: suivant
    events:
      enter-portal:
        actor   : "Vous arrivez dans le grenier de la maison"
  - id: grenier-000-sens_interdit
    location: grenier-000
    direction: sens_interdit
    events:
      enter-portal:
        actor   : "XXX"
---
id: portal-grenier-coin-000
type: Portal
exits:
  - id: grenier-000-ouest
    location: grenier-000
    direction: ouest
    events:
      enter-portal:
        actor   : "Vous vous dirigez vers le recoin sombre"
  - id: coin-000-est
    location: coin-000
    direction: est
    events:
      enter-portal:
        actor   : "Vous revenez au centre du grenier"
---
id: portal-grenier-borne-verrouille-000
type: Portal
exits:
  - id: grenier-000-est
    location: grenier-000
    direction: est
    name:
        - borne
    events:
      enter-portal:
        actor   : "Vous vous dirigez vers la borne d'arcade"
  - id: borne-verrouille-000-ouest
    location: borne-verrouille-000
    direction: ouest
    events:
      enter-portal:
        actor   : "Vous revenez au centre du grenier"
---
id: portal-borne-verrouille-borne-000
type: Portal
props:
  - closed
  - closable
exits:
  - id: borne-verrouille-000-play
    location: borne-verrouille-000
    direction: play
    name:
      - borne
    gender: fem
    props:
      - for-enter
    events:
      enter-portal:
        actor     : "Les meilleurs scores s'affichent."
        failed:
          actor   : &porte001 |
            Rien ne se passe ... La borne d'arcade semble attendre quelque chose d'autre avant.
          observer: &porte002 |
            {{ actor.name }} tente en vain d'ouvrir la porte du
            département info.
      leave-portal:
        actor     : "Vous quittez le jeux, la borne ne s'eteint pas pour autant."
        observer  : "{{ actor.name }} sort du département info."
      open        :
        - props   : portal:closed
          actor   : *porte001
          observer: *porte002
        - props   : -portal:closed
          actor   : &porte003 "Vous avez deja mis une piece dans la borne !"
      open-with   :
        - props   :
            - portal:closed
            - object2:key-for-borne-verrouille-borne-000
          effects :
            type  : ChangePropEffect
            modifs:
              - -portal:closed
          actor   : |
            La machine semble toujours fonctionner ! Une musique commence a sortir de la borne d'arcade.
        - props   :
            - portal:closed
            - -object2:key-for-borne-verrouille-borne-000
          actor   : |
            Vous tentez vainement de mettre {{ object2.noun_the() }} dans la fente de la borne.
        - props   :
            - -portal:closed
          actor   : *porte003
      close       : &porte004
        - props   : portal:closed
          actor   : "Vous fermez la porte du département."
          observer: "{{ actor.name }} ferme le porte du département info."
          effects :
            - type  : ChangePropEffect
              modifs: =portal-borne-verrouille-borne-000:closed
      close-with  : *porte004
  - id: borne-deverrouille-000-exit
    location: borne-deverrouille-000
    direction: exit
    name: borne
    gender: fem
    props:
      - for-leave
    events:
      enter-portal:
        actor   : "Vous quittez la borne d'arcade"
        #test